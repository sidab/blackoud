<template>

    <div class="page">

        <div class="navbar theme-dark">

            <div class="navbar-bg"></div>

            <div class="navbar-inner sliding">

                <div class="left">

                    <a class="link back">

                        <i class="icon icon-back"></i>

                        <span>Назад</span>

                    </a>

                </div>

                <div class="title">Контакты</div>

            </div>

        </div>

        <div class="page-content">

            <div class="swiper-container contacts-slider text-align-center">

                <div class="swiper-wrapper">

                    {{#each images}}

                        <div class="swiper-slide" data-image="{{this}}" style="background-image: url('{{this}}')"></div>

                    {{/each}}

                </div>

                <div class="swiper-pagination"></div>

            </div>

            <div class="block-title block-title-large text-color-white">Наши контакты</div>

            <div class="list padding no-margin-bottom">

                <ul>

                    <li>

                        <div class="item-content">

                            <div class="item-media">

                                <i class="icon f7-icons">map</i>

                            </div>

                            <div class="item-inner">

                                <div class="item-title">Город:</div>

                                <div class="item-after">{{city}}</div>

                            </div>

                        </div>

                    </li>

                    <li>

                        <div class="item-content">

                            <div class="item-media">

                                <i class="icon f7-icons">map_pin</i>

                            </div>

                            <div class="item-inner">

                                <div class="item-title">Адрес:</div>

                                <div class="item-after">{{adres}}</div>

                            </div>

                        </div>

                    </li>

                    <li>

                        <div class="item-content">

                            <div class="item-media">

                                <i class="icon f7-icons">clock</i>

                            </div>

                            <div class="item-inner">

                                <div class="item-title">График:</div>

                                <div class="item-after">{{worktime}}</div>

                            </div>

                        </div>

                    </li>

                    <li>

                        <div class="item-content">

                            <div class="item-media">

                                <i class="icon f7-icons">phone_circle</i>

                            </div>

                            <div class="item-inner">

                                <div class="item-title">Телефон:</div>

                                <div class="item-after">

                                    <a class="external" target="_system" href="tel:{{phone}}">{{phone}}</a>

                                </div>

                            </div>

                        </div>

                    </li>

                    {{#if phone2}}

                        <li>

                            <div class="item-content">

                                <div class="item-media">

                                    <i class="icon f7-icons">phone_circle</i>

                                </div>

                                <div class="item-inner">

                                    <div class="item-title">Доп. телефон:</div>

                                    <div class="item-after">

                                        <a class="external" target="_system" href="tel:{{phone2}}">{{phone2}}</a>

                                    </div>

                                </div>

                            </div>

                        </li>

                    {{/if}}

                </ul>

            </div>

            <div class="block-title block-title-large no-margin-top text-color-white">Социальные сети</div>

            <div class="margin-horizontal social-block">

                {{#if instagram}}

                    <a href="{{instagram}}" target="_system" class="external margin-bottom button button-instagram text-color-white button-large">

                        <i class="icon f7-icons">logo_instagram</i>

                        <span>Instagram</span>

                    </a>

                {{/if}}

                {{#if facebook}}

                    <a href="{{facebook}}" target="_system" class="external margin-bottom button button-facebook text-color-white button-large">

                        <i class="icon f7-icons">logo_facebook</i>

                        <span>Facebook</span>

                    </a>

                {{/if}}

                {{#if whatsapp}}

                    <a href="{{whatsapp}}" target="_system" class="external button button-whatsapp text-color-white button-large">

                        <i class="icon" style="background-image: url(img/icons/whatsapp.png)"></i>

                        <span>WhatsApp</span>

                    </a>

                {{/if}}

            </div>

            <div class="block-title block-title-large text-color-white">Мы на карте</div>

            <div class="block-map">

                <div class="preloader color-white"></div>

                <iframe class="display-none" data-src="{{map}}" frameborder="0"></iframe>

            </div>

        </div>

    </div>

</template>

<style scoped>

    {{this}} {
        background-image: linear-gradient(to bottom, #1f1d1c, #0d0903);
    }

    {{this}}, .block-map {
        background-image: linear-gradient(to bottom, #1f1d1c, #0d0903);
    }

    {{this}} .block-map {
                 height: 350px;
                 position: relative;
             }

    {{this}} .block-map .preloader {

                 position: absolute;
                 width: 40px;
                 height: 40px;
                 left: calc(50% - 20px);
                 top: calc(50% - 20px);
             }
    {{this}} iframe {
                 width: 100%;
                 height: 350px;
             }

    {{this}} .list ul {
                 border-radius: 10px;
             }

    {{this}} .list ul .item-title {
                 white-space: normal;
             }

    {{this}} .list ul .item-after {
                 max-width: 70%;
                 white-space: normal;
                 text-align: right;
             }


    {{this}} .contacts-slider {
                 height: var(--main-slider-height);
                 background-image: linear-gradient(to bottom, #1f1d1c, #0d0903);
             }

    {{this}} .contacts-slider .swiper-wrapper {
                 height: var(--main-slider-height);
             }

    {{this}} .contacts-slider .swiper-slide {
                 height: var(--main-slider-height);
             }

    {{this}} .contacts-slider .swiper-slide {
                 background-repeat: no-repeat;
                 background-size: auto 100%;
                 background-position: center;
             }

    {{this}} .button-instagram {
                 background: #f09433;
                 background: -moz-linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
                 background: -webkit-linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);
                 background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);
                 filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f09433', endColorstr='#bc1888',GradientType=1 );

             }

    {{this}} .button-facebook {
                 background-color: #4C69BA;
                 background-image: linear-gradient(#4C69BA, #3B55A0);
             }

    {{this}} .social-block {
                 margin-top: 30px;
             }

    {{this}} .button-whatsapp {
                 background-color: #1cd741;
             }

    {{this}} .button-whatsapp i {
                 background-image: url(img/icons/whatsapp.png);
                 width: 30px;
                 height: 30px;
                 background-size: cover;
             }
</style>

<script>

    return {

        data: function () {

            return {



            }

        },
        methods: {

        },
        on: {

            pageInit: function() {

                var component = this;
                var page = component.$el;

                setTimeout(function () {

                    var images = [];

                    page.find('.contacts-slider').find('.swiper-slide').each(function () {

                        images.push($$(this).data('image'));

                    });

                    var contactsSlider = new Swiper(page.find('.contacts-slider'), {
                        spaceBetween: 0,
                        pagination: {
                            el: '.swiper-pagination',
                            type: 'bullets',
                            clickable: true
                        },
                        loop: true,
                        autoplay: {
                            delay: 5000,
                        },
                        lazy: {
                            loadPrevNext: true
                        },
                        on: {
                            init: function () {

                                var photoBrowserContacts = app.photoBrowser.create({
                                    photos: images,
                                    routableModals: false,
                                    theme: 'dark'
                                });

                                page.find('.contacts-slider').find('.swiper-slide').on('click', function () {

                                    var index = $$(this).data('swiper-slide-index');

                                    photoBrowserContacts.open(Number(index));

                                });

                            }
                        }
                    });

                    var iframe = page.find('.block-map').find('iframe');

                    component.mapTimeout = setTimeout(function () {

                        iframe.attr('src', iframe.data('src'));

                        iframe.on('load', function () {

                            page.find('.block-map').find('.preloader').addClass('display-none');
                            iframe.removeClass('display-none');

                        });

                        setTimeout(function () {

                            page.find('.block-map').find('.preloader').addClass('display-none');
                            iframe.removeClass('display-none');

                        }, 3000);

                    }, 3000);

                }, 100);

            },
            pageBeforeOut: function () {

                var component = this;

                clearTimeout(component.mapTimeout);

            }

        }

    }

</script>